<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CleanCity - Profile</title>
    <link rel="stylesheet" href="/user.css">
</head>
<script src="https://kit.fontawesome.com/985c6371ec.js" crossorigin="anonymous"></script>

<body>
    <%- include('./partials/nav.ejs') %>

    <div class="profile-container">
        <div class="profile-header">
            <div class="profile-picture">
                <img src="<%= locals.user.profilePicture %>" alt="Profile Picture">
            </div>
            <div class="profile-info">
                <h1>
                    <%= locals.user.firstname %>
                        <%= locals.user.lastname %>
                </h1>
            </div>
            <form action="/update" method="get" class="edit-button">
                <button><i class="fa-solid fa-pen-to-square"></i></button>
            </form>
        </div>

        <div class="details-section">
            <h2>Details</h2>
            <p>Email: <%= locals.user.email %>
            </p>
            <p>Date of Birth: <%= locals.user.date %>
            </p>
        </div>

        <div class="posts-section">
            <h2>Posts</h2>
            <% if (locals.user.reports && locals.user.reports.length> 0) { %>
                <% locals.user.reports.forEach(report=> { %>
                    <div class="post">
                        <h3>Reported on <%= new Date(report.date).toLocaleString('en-US', { year: 'numeric' ,
                                month: 'long' , day: 'numeric' , hour: '2-digit' , minute: '2-digit' }) %>
                        </h3>
                        <img src="<%= report.imageURL %>" alt="Litter Image">
                        <p>
                            <%= report.complain %>
                        </p>
                        <p>
                            <%= report.category %> Waste
                        </p>
                        <p>
                            <%= report.weight %>
                        </p>
                    </div>
                    <% }) %>
                        <% } else { %>
                            <p>No reports available.</p>
                            <% } %>
        </div>
    </div>
</body>

</html>